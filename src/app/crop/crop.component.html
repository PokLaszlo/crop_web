<h2>Termények</h2>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary mb-2" (click)="setShowModal()">
    Hozzáadás
</button>

<table class="table table-striped table-info">
    <thead>
        <tr>
            <th>Id</th>
            <th>Név</th>
            <th>Típus</th>
            <th>Fehérjetartalom</th>
            <th>Termelő</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @for(crop of crops; track crop.id) {
            <tr>
                <td data-column="Id">{{ crop.id }}</td>
                <td data-column="Név">{{ crop.name }}</td>
                <td data-column="Típus">{{ crop.type }}</td>
                <td data-column="Fehérjetartalom">{{ crop.proteinContent }}</td>
                <td data-column="Termelő Id">{{ crop.producerId }}</td>
                <td>
                    <button class="btn btn-warning" (click)="startEditCrop(crop)">
                        Módosítás
                    </button>
                </td>
                <td>
                    <button class="btn btn-danger" (click)="confirm_Animation_Window(crop.id)">
                        Törlés
                    </button>
                </td>
            </tr>
        }
    </tbody>
</table>



@if(showModal){
  <!-- Modal -->
  <div class="modal" style="display: block;">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalLabel">
            {{addMode?"Hozzáadás":"Módosítás"}}
          </h1>
          <button type="button" class="btn-close" (click)="cancel()"></button>
        </div>
        <div class="modal-body">
            <form id="cropForm" [formGroup]="cropForm" (ngSubmit)="save()">
                @if(!addMode){
                    <div>
                        <label for="id" class="form-label">Id</label>
                        <input type="text" class="form-control"
                        id="id" formControlName="id" readonly>
                    </div>
                }
                <div>
                    <label for="name" class="form-label">Név</label>
                    <input type="text" class="form-control"
                    id="name" formControlName="name">
                </div>
                <div>
                    <label for="type" class="form-label">Típus</label>
                    <input type="text" class="form-control"
                    id="type" formControlName="type">
                </div>
                <div>
                    <label for="proteinContent" class="form-label">Fehérjetartalom</label>
                    <input type="text" class="form-control"
                    id="proteinContent" formControlName="proteinContent">
                </div>
                <div>
                    <label for="producerId" class="form-label">Termelő</label>

                    <select id="producerId" formControlName="producerId"
                    class="form-select">
                        @for(producer of producers; track producer.id) {
                            <option value="{{ producer.id }}">{{ producer.name }}</option>
                        }
                    </select>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" (click)="cancel()">
                Bezárás
            </button>
            @if(addMode){
            <button type="submit" class="btn btn-primary"form="cropForm">
                Mentés
            </button>
            }@else{
            <button type="submit" class="btn btn-warning"form="cropForm">
                Módosítás
            </button>
            }
        </div>
      </div>
    </div>
  </div>
  <div class="div modal-backdrop fade show"></div>
}
